{% assign skills = site.data.data.skills %}
{% if skills %}
<section class="skills-section section">
  <h2 class="section-title">
    <span class="fa-stack fa-xs">
      <i class="fas fa-circle fa-stack-2x"></i>
      <i class="fas fa-wrench fa-stack-1x fa-inverse"></i>
    </span>
    {{ skills.title }}
  </h2>
  <div class="skillset">
    {% for category in skills.toolset %}
      <div class="category-section">
        <h3 class="category-title">{{ category.name }}</h3>
        {% for skill in category.items %}
        <div class="item">
          <h4 class="level-title">{{ skill.name }}</h4>
          <div class="level-bar">
            <div class="level-bar-inner" data-level="{{ skill.level }}"></div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% endfor %}
  </div>
</section>

<style>
  .category-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #f5f5f5;
  }
  .category-section:first-child {
    margin-top: 0;
    padding-top: 0;
    border-top: none;
  }
  .category-title {
    font-size: 1.1em;
    color: #545E6C;
    font-weight: 500;
    margin-bottom: 15px;
  }
  .level-title {
    font-size: 0.9em;
    color: #3F4650;
    font-weight: 400;
  }
  .level-bar-inner {
    height: 12px;
    background: #66cb8c;
  }
</style>

<script>
  // Wrap the JavaScript in a function
  function setLevelBarWidths() {
    $('.level-bar-inner').each(function() {
      var itemWidth = $(this).data('level');
      $(this).css('width', itemWidth);
    });
  }

  // Run the function when the document is ready
  $(document).ready(setLevelBarWidths);

  // Also run the function when the window is fully loaded
  $(window).on('load', setLevelBarWidths);
</script>
{% endif %}